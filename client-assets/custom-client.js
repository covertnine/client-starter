jQuery(document).ready(function() {
  (function($) {
    // add any css classes you don't want to be smoothState-d here
    var notSmooth =
      '.nav-search, btn-nav-search, .btn-nav-search, .search-close, .mega-menu-item-has-children .mega-menu-link, .wp-block-gallery a[href$=".jpg"], .wp-block-gallery a[href$=".jpeg"], .wp-block-gallery a[href$=".png"], .wp-block-gallery a[href$=".gif, "], .cortex-popup';
    var options = {
        prefetch: true,
        cacheLength: 2,
        blacklist: notSmooth,
        onStart: {
          duration: 250, // Duration of our animation
          render: function($container) {
            // Add your CSS animation reversing class
            $container.addClass("is-exiting");

            // Restart your animation
            smoothState.restartCSSAnimations();
          }
        },
        onReady: {
          duration: 0,
          render: function($container, $newContent) {
            // Remove your CSS animation reversing class
            $container.removeClass("is-exiting");

            // Inject the new content
            $container.html($newContent);
          }
        }
      },
      smoothState = $("#page")
        .smoothState(options)
        .data("smoothState");
  })(jQuery);
});
